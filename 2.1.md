## 2.1 单行文本处理

#### awk

awk可用于重一个包含多个域的记录中抽取数据域

```shell
#!/bin/sh

VAR="Hello world I-am-not-good"

# 默认空格分割
echo $VAR | awk '{print $1, $2}'
# Hello world

# 指定分割符
echo $VAR | awk -F- '{print $1, $2}'
# Hello world I am

# 确定域的数目
echo $VAR | awk '{print NF}'
# 3

#确定最后一个域
echo $VAR | awk '{print $NF}'
# I-am-not-good

#确定倒数第二个域
echo $VAR | awk '{print $(NF - 1)}'
# world

exit 0

```

#### 给awk传送变量

有时候需要在程序运行后才知道变量, 给awk传递变量就能处理这种情况.

```
#!/bin/sh

VAR="Hello world I-am-fine"
theCount=2

echo $VAR | awk -v counter=$theCount '{print $counter}'
# world

# -v是一个教新的选项, 在要求可移植性的时候, 它可能不是理想的选择.在这种情况下就需要下面写法.
echo $VAR | awk '{print $counter}' counter=$theCount
# world

exit 0
```

#### 在一定条件下给awk传送变量

```
#!/bin/sh

node="localhost"

echo awk -v NODE=$node '$2 == NODE {print $1}' /etc/hosts
# echo 127.0.0.1

exit 0
```

#### awk确定串长度

```
#!/bin/sh

VAR="Hello world I-am-fine"

echo $VAR | awk '{print length}'
# 21

exit 0
```




[目录](README.md)

[上一节](1.6.md)
[下一节](2.2.md)

